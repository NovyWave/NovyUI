<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Component Test</title>
    <script type="module" src="/node_modules/vue/dist/vue.esm-bundler.js"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            padding: 20px;
            background-color: #f8fafc;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 32px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .demo-section {
            margin-bottom: 32px;
        }
        .demo-section h3 {
            margin-bottom: 16px;
            color: #1f2937;
        }
        .demo-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        .value-display {
            margin-top: 8px;
            padding: 8px 12px;
            background-color: #f3f4f6;
            border-radius: 4px;
            font-size: 14px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <h1>Select Component Demo</h1>
            
            <div class="demo-section">
                <h3>Basic Select</h3>
                <label>Choose an option:</label>
                <select-component 
                    :model-value="basicValue"
                    @update:model-value="basicValue = $event"
                    :options="basicOptions"
                    placeholder="Select an option..."
                ></select-component>
                <div class="value-display">Selected: {{ basicValue || 'None' }}</div>
            </div>
            
            <div class="demo-section">
                <h3>Searchable Select</h3>
                <label>Search countries:</label>
                <select-component 
                    :model-value="searchableValue"
                    @update:model-value="searchableValue = $event"
                    :options="countryOptions"
                    :searchable="true"
                    placeholder="Select a country..."
                ></select-component>
                <div class="value-display">Selected: {{ searchableValue || 'None' }}</div>
            </div>
            
            <div class="demo-section">
                <h3>Multiple Selection</h3>
                <label>Choose multiple fruits:</label>
                <select-component 
                    :model-value="multipleValues"
                    @update:model-value="multipleValues = $event"
                    :options="fruitOptions"
                    :multiple="true"
                    placeholder="Select fruits..."
                ></select-component>
                <div class="value-display">Selected: {{ multipleValues.length > 0 ? multipleValues.join(', ') : 'None' }}</div>
            </div>
        </div>
    </div>

    <script type="module">
        import { createApp, ref } from '/node_modules/vue/dist/vue.esm-bundler.js';
        
        // Mock Select component for testing (simplified version)
        const SelectComponent = {
            template: `
                <div style="position: relative; display: inline-block; width: 100%;">
                    <button 
                        @click="toggleOpen"
                        style="
                            display: flex;
                            align-items: center;
                            justify-content: space-between;
                            width: 100%;
                            min-width: 200px;
                            padding: 8px 12px;
                            background: white;
                            border: 1px solid #d1d5db;
                            border-radius: 4px;
                            cursor: pointer;
                            font-size: 14px;
                            gap: 8px;
                        "
                    >
                        <span>{{ displayValue }}</span>
                        <span style="transform: rotate({{ isOpen ? 180 : 0 }}deg); transition: transform 0.15s;">â–¼</span>
                    </button>
                    <div 
                        v-if="isOpen" 
                        style="
                            position: absolute;
                            top: 100%;
                            left: 0;
                            right: 0;
                            background: white;
                            border: 1px solid #d1d5db;
                            border-radius: 4px;
                            margin-top: 4px;
                            max-height: 200px;
                            overflow-y: auto;
                            z-index: 1000;
                            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                        "
                    >
                        <input 
                            v-if="searchable"
                            v-model="searchQuery"
                            @click.stop
                            placeholder="Search..."
                            style="
                                width: 100%;
                                padding: 8px 12px;
                                border: none;
                                border-bottom: 1px solid #e5e7eb;
                                outline: none;
                                font-size: 14px;
                            "
                        />
                        <div
                            v-for="option in filteredOptions"
                            :key="getOptionValue(option)"
                            @click="selectOption(option)"
                            style="
                                padding: 8px 12px;
                                cursor: pointer;
                                font-size: 14px;
                                border-bottom: 1px solid #f3f4f6;
                            "
                            :style="{
                                backgroundColor: isSelected(option) ? '#dbeafe' : 'transparent',
                                color: isSelected(option) ? '#1e40af' : '#374151'
                            }"
                            @mouseenter="$event.target.style.backgroundColor = '#f3f4f6'"
                            @mouseleave="$event.target.style.backgroundColor = isSelected(option) ? '#dbeafe' : 'transparent'"
                        >
                            {{ getOptionLabel(option) }}
                        </div>
                    </div>
                </div>
            `,
            props: {
                modelValue: { default: null },
                options: { type: Array, default: () => [] },
                multiple: { type: Boolean, default: false },
                searchable: { type: Boolean, default: false },
                placeholder: { type: String, default: 'Select...' }
            },
            emits: ['update:modelValue'],
            setup(props, { emit }) {
                const isOpen = ref(false);
                const searchQuery = ref('');
                
                const getOptionValue = (option) => {
                    return typeof option === 'object' ? option.value : option;
                };
                
                const getOptionLabel = (option) => {
                    return typeof option === 'object' ? option.label : option;
                };
                
                const filteredOptions = computed(() => {
                    if (!props.searchable || !searchQuery.value) return props.options;
                    const query = searchQuery.value.toLowerCase();
                    return props.options.filter(option => 
                        getOptionLabel(option).toLowerCase().includes(query)
                    );
                });
                
                const displayValue = computed(() => {
                    if (props.multiple && Array.isArray(props.modelValue)) {
                        return props.modelValue.length > 0 
                            ? `${props.modelValue.length} selected`
                            : props.placeholder;
                    }
                    
                    if (props.modelValue) {
                        const option = props.options.find(opt => getOptionValue(opt) === props.modelValue);
                        return option ? getOptionLabel(option) : props.placeholder;
                    }
                    
                    return props.placeholder;
                });
                
                const toggleOpen = () => {
                    isOpen.value = !isOpen.value;
                    if (!isOpen.value) searchQuery.value = '';
                };
                
                const selectOption = (option) => {
                    const value = getOptionValue(option);
                    
                    if (props.multiple) {
                        const current = Array.isArray(props.modelValue) ? [...props.modelValue] : [];
                        const index = current.indexOf(value);
                        
                        if (index >= 0) {
                            current.splice(index, 1);
                        } else {
                            current.push(value);
                        }
                        
                        emit('update:modelValue', current);
                    } else {
                        emit('update:modelValue', value);
                        isOpen.value = false;
                    }
                };
                
                const isSelected = (option) => {
                    const value = getOptionValue(option);
                    if (props.multiple && Array.isArray(props.modelValue)) {
                        return props.modelValue.includes(value);
                    }
                    return props.modelValue === value;
                };
                
                return {
                    isOpen,
                    searchQuery,
                    filteredOptions,
                    displayValue,
                    toggleOpen,
                    selectOption,
                    isSelected,
                    getOptionValue,
                    getOptionLabel
                };
            }
        };
        
        const { createApp, ref, computed } = Vue;
        
        createApp({
            components: {
                SelectComponent
            },
            setup() {
                const basicValue = ref(null);
                const searchableValue = ref(null);
                const multipleValues = ref([]);
                
                const basicOptions = [
                    'Option 1',
                    'Option 2', 
                    'Option 3',
                    'Option 4',
                    'Option 5'
                ];
                
                const countryOptions = [
                    { value: 'us', label: 'United States' },
                    { value: 'canada', label: 'Canada' },
                    { value: 'uk', label: 'United Kingdom' },
                    { value: 'france', label: 'France' },
                    { value: 'germany', label: 'Germany' },
                    { value: 'japan', label: 'Japan' },
                    { value: 'australia', label: 'Australia' }
                ];
                
                const fruitOptions = [
                    { value: 'apple', label: 'Apple' },
                    { value: 'banana', label: 'Banana' },
                    { value: 'cherry', label: 'Cherry' },
                    { value: 'date', label: 'Date' },
                    { value: 'elderberry', label: 'Elderberry' }
                ];
                
                return {
                    basicValue,
                    searchableValue,
                    multipleValues,
                    basicOptions,
                    countryOptions,
                    fruitOptions
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
